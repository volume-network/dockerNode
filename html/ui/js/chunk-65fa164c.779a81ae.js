(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-65fa164c"],{"3b08":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mine-pool-nodes"},[a("vs-container",[a("vs-header",{staticStyle:{"margin-top":"20px"},attrs:{title:t.$t("Pool.MPRN")}}),a("vs-main",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"hidden-xs-only",staticStyle:{"margin-top":"10px"}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{ref:"vsChart2",staticStyle:{width:"100%",height:"400px"}})])],1)],1),a("vs-main",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"hidden-sm-and-up",staticStyle:{"margin-top":"10px"}},[a("div",{ref:"vsChart3",staticStyle:{width:"100%",height:"300px"}})]),a("vs-main",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"hidden-sm-and-up",staticStyle:{"margin-top":"10px"}},[a("div",{ref:"vsChart4",staticStyle:{width:"100%",height:"300px"}})]),a("vs-main",{staticStyle:{"margin-top":"10px","margin-bottom":"46px"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{"font-size":"14px"},attrs:{data:t.poolArray,"header-cell-style":t.rowClass}},[a("el-table-column",{attrs:{prop:"id",type:"index",index:t.indexMethod,label:"",width:"50",align:"center"}}),a("el-table-column",{attrs:{prop:"shortName",label:t.$t("account.Address"),width:"240",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.accountRS?a("router-link",{staticClass:"color-text-button-primary",attrs:{to:"/mine-pool-node/"+e.row.account}},[t._v(t._s(e.row.accountRS)+"\n            ")]):a("span",[t._v(t._s(e.row.shortName))])]}}])}),a("el-table-column",{attrs:{prop:"minerCount",width:"80",align:"center",label:t.$t("Pool.Miner")}}),a("el-table-column",{attrs:{prop:"totalPledged","min-width":"120",align:"right",label:t.$t("Pool.StakedAmount")},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("toThousands")(t._f("formatVol")(e.row.totalPledged))))])]}}])}),a("el-table-column",{attrs:{prop:"pledgeRate","min-width":"120",align:"center",label:t.$t("Pool.StakedRate")},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("toRate")(e.row.pledgeRate)))])]}}])}),a("el-table-column",{attrs:{"render-header":t.renderHeader,prop:"blockNum","min-width":"80",align:"center","class-name":"not-long",label:t.$t("Pool.BlockForged")}}),a("el-table-column",{attrs:{"render-header":t.renderHeader,prop:"latestBlockReward","min-width":"90",align:"right","class-name":"not-long",label:t.$t("Pool.LatestBlockReward")+"(VOL)"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("toThousands")(t._f("formatVol")(e.row.latestBlockReward))))])]}}])}),a("el-table-column",{attrs:{"render-header":t.renderHeader,prop:"totalForgedBalance",align:"right","class-name":"not-long",label:t.$t("Pool.TotalBlockEarning")+"(VOL)"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("toThousands")(t._f("formatVol")(e.row.totalForgedBalance))))])]}}])})],1)],1)],1)],1)},o=[],r=a("a34a"),l=a.n(r),i=a("313e"),s=a.n(i),c=a("c6e6"),d=a("c493"),u=a("365c"),f=a("d977"),p=a.n(f);function h(t,e,a,n,o,r,l){try{var i=t[r](l),s=i.value}catch(c){return void a(c)}i.done?e(s):Promise.resolve(s).then(n,o)}function g(t){return function(){var e=this,a=arguments;return new Promise(function(n,o){var r=t.apply(e,a);function l(t){h(r,n,o,l,i,"next",t)}function i(t){h(r,n,o,l,i,"throw",t)}l(void 0)})}}var m={name:"MinePoolNodes",data:function(){return{loading:!1,poolArray:[],openFullScreen:!1,totalCap:"",blockReward:0,leftTitle:{en:"MPRN's Capacity Rate","zh-cn":"矿池节点空间容量占比"},rightTitle:{en:"MPRN's Staking Rate","zh-cn":"矿池节点质押量占比"}}},created:function(){this.getLastBlock(),this.poolList()},mounted:function(){},watch:{"$i18n.locale":function(){this.poolList()}},update:function(){this.drawPie1(),this.drawPie2()},methods:{getLastBlock:function(){var t=this;Object(c["a"])({requestType:"getBlockList",limit:1,page:1}).then(function(e){0===e.errCode&&e.data.data&&(t.blockReward=e.data.data[0].blockReward)})},getCap:function(){var t=this;Object(u["f"])().then(function(e){t.totalCap=e.data.data})},rowClass:function(){return"font-weight: normal;font-size:14px;"},indexMethod:function(t){return 0===t?"":t++},drawPie1:function(){var t,e,a=this.$refs.vsChart1,n=this.$refs.vsChart3;a&&(t=s.a.init(a)),n&&(e=s.a.init(n));for(var o=[],r=this.poolArray.length,l=1;l<r;l++){var i=100*this.poolArray[l].capRate;i&&o.push({value:i,name:this.poolArray[l].shortName||"无名"})}var c={backgroundColor:"#ffffff",title:{text:this.leftTitle[this.$i18n.locale],x:"center",y:"0"},series:[{name:"访问来源",type:"pie",radius:["30%","60%"],center:["50%","55%"],data:o,label:{normal:{show:!0,textStyle:{color:"#666"}},emphasis:{show:!0}},labelLine:{normal:{show:!0}},itemStyle:{normal:{color:function(t){var e=["#89b4e7","#434347","#a8ea89","#e9a668","#8186e2","#dd6681","#e8da69","#539e9e","#e06560","#a7e6df"];return e[t.dataIndex%10]}}}}]};t&&t.setOption(c),e&&e.setOption(c)},drawPie2:function(){var t,e,a=this.$refs.vsChart2,n=this.$refs.vsChart4;a&&(t=s.a.init(a)),n&&(e=s.a.init(n));for(var o=[],r=this.poolArray.length,l=1;l<r;l++){var i=100*this.poolArray[l].pledgeRate;i>1.2&&c(i,this.poolArray[l].accountRS)}function c(t,e){o.push({value:t,name:e||"无名"})}var d={backgroundColor:"#ffffff",title:{text:this.rightTitle[this.$i18n.locale],x:"center",y:"0"},series:[{name:"访问来源",type:"pie",radius:["30%","60%"],center:["50%","50%"],data:o,label:{normal:{show:!0,textStyle:{color:"#666"}},emphasis:{show:!0}},labelLine:{normal:{show:!0}},itemStyle:{normal:{color:function(t){var e=["#89b4e7","#434347","#a8ea89","#e9a668","#8186e2","#dd6681","#e8da69","#539e9e","#e06560","#a7e6df"];return e[t.dataIndex%10]}}}}]};t&&t.setOption(d),e&&e.setOption(d)},openDetails:function(t){var e="/mine-pool-node/"+t.accountID;this.$router.push({path:e})},poolList:function(){var t=g(l.a.mark(function t(){var e,a,n,o,r=this;return l.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e="/vol?requestType=getMinePoolList",this.loading=!0,a=this,t.next=5,Object(u["g"])();case 5:n=t.sent,o=n.data,Object(d["a"])(e,!0).then(function(t){if(0===t.errCode){for(var e=t.data.data,n=0,l=0,i=0,s=0;s<e.length;s++)e[s].minerCount&&(n+=parseFloat(e[s].minerCount)),e[s].totalForgedBalance&&(l+=parseFloat(e[s].totalForgedBalance)),e[s].blockNum&&(i+=parseFloat(e[s].blockNum));var c={id:0,logo:p.a,shortName:"全网",location:"-",minerCount:n,usedCap:a.totalCap,capRate:"1",pledgeRate:"1",totalPledged:o.totalPledged,totalForgedBalance:l,blockNum:i,latestBlockReward:r.blockReward};e.unshift(c),a.poolArray=t.data.data,r.drawPie2()}}).finally(function(){r.loading=!1});case 8:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()}},v=m,w=(a("ceb2"),a("2877")),b=Object(w["a"])(v,n,o,!1,null,"236e66e8",null),y=b.exports;e["default"]=y},"6cd5":function(t,e,a){},c493:function(t,e,a){"use strict";a.d(e,"d",function(){return r}),a.d(e,"a",function(){return l}),a.d(e,"b",function(){return i}),a.d(e,"c",function(){return s}),a.d(e,"e",function(){return c});var n=a("bc3a"),o=a.n(n);function r(t,e){return new Promise(function(a,n){o.a.get(t).then(function(t){t.data.data&&t.data.data.rows&&e&&d(t.data.data.rows),a(t.data)},function(t){console.log(t)}).catch(function(t){console.log(t)})})}function l(t,e){return new Promise(function(a,n){o.a.get(t).then(function(t){t.data.data&&t.data.data.rows&&e&&d(t.data.data.rows),a(t.data)},function(t){console.log(t)}).catch(function(t){console.log(t)})})}function i(){var t=localStorage.getItem("poolConfig");return t}function s(){var t=localStorage.getItem("poolConfigLogo");return t}function c(t){t()}function d(t){for(var e={},a={},n=0;n<t.length;n++)t[n].accountID&&(e[t[n].accountID]=t[n].shortName,a[t[n].accountID]=t[n].logo);var o=JSON.stringify(e),r=JSON.stringify(a);localStorage.setItem("poolConfig",o),localStorage.setItem("poolConfigLogo",r)}},ceb2:function(t,e,a){"use strict";var n=a("6cd5"),o=a.n(n);o.a},d977:function(t,e,a){t.exports=a.p+"img/0.ef406098.png"}}]);